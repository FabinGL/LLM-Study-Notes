# LLM Study-Notesâ°
<p align="center">
   ğŸŒ <a href="https://github.com/FabinGL" target="_blank">Github</a> â€¢ ğŸ“ƒ  <a href="https://fabingl.github.io/" target="_blank">HomePage</a> <br>
</p>

åœ¨è¿™ä¸ªç¬”è®°ä¸­æˆ‘ä¼šåˆ†äº«ä¸€äº›æˆ‘ä¸ªäººå­¦ä¹ ChatGPTä»¥åŠLLMå¤§è¯­è¨€æ¨¡å‹çš„è¿‡ç¨‹ç»å†ï¼ŒåŒæ—¶ä¹Ÿä¼šè®°å½•ä¸€äº›ä»£ç ä¸Šçš„å‘ã€‚å®é™…ä¸Šæœ€è¿‘ä¸æ­¢ç©äº†LLMè¿˜ç©äº†å›¾åƒçš„æ¨¡å‹ï¼Œä½†æ˜¯ç°åœ¨è¿™ä¸ªå·²ç»å¾ˆæˆç†Ÿäº†ï¼Œæ‰€ä»¥ç­‰ä»¥åæœ‰ç©ºç ”ç©¶ç ”ç©¶å†å†™å§ã€‚
æœ¬äººä»¥ä¸‹æ“ä½œåŸºäºä»¥ä¸‹ç”µè„‘é…ç½®å®ŒæˆğŸ’»ã€‚
- CPU:5900X
- GPU:3080Ti O12G
- å†…å­˜:32G
- Windows 11

å®åœ¨ç©·å•Šï¼Œåˆ«äººéƒ½æ˜¯æ‹¿å‡ å¼ A100ç©ï¼Œæˆ‘å°±åªèƒ½æ‹¿è‡ªå·±çš„ä¸ªäººç”µè„‘ç©ä¸€ä¸‹äº†ğŸ˜­ã€‚

## Introdation
å¤§è¯­è¨€æ¨¡å‹ï¼ˆè‹±æ–‡ï¼šLarge Language Modelï¼Œç¼©å†™LLMï¼‰ï¼Œä¹Ÿç§°å¤§å‹è¯­è¨€æ¨¡å‹ï¼Œæ˜¯ä¸€ç§äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œæ—¨åœ¨ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚å®ƒä»¬åœ¨å¤§é‡çš„æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥æ‰§è¡Œå¹¿æ³›çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ€»ç»“ã€ç¿»è¯‘ã€æƒ…æ„Ÿåˆ†æç­‰ç­‰ã€‚LLMçš„ç‰¹ç‚¹æ˜¯è§„æ¨¡åºå¤§ï¼ŒåŒ…å«æ•°åäº¿çš„å‚æ•°ï¼Œå¸®åŠ©å®ƒä»¬å­¦ä¹ è¯­è¨€æ•°æ®ä¸­çš„å¤æ‚æ¨¡å¼ã€‚è¿™äº›æ¨¡å‹é€šå¸¸åŸºäºæ·±åº¦å­¦ä¹ æ¶æ„ï¼Œå¦‚è½¬åŒ–å™¨ï¼Œè¿™æœ‰åŠ©äºå®ƒä»¬åœ¨å„ç§NLPä»»åŠ¡ä¸Šå–å¾—ä»¤äººå°è±¡æ·±åˆ»çš„è¡¨ç°ã€‚

ç›®å‰æˆ‘ä½¿ç”¨çš„å¤§è¯­è¨€æ¨¡å‹åˆ†åˆ«æœ‰ä»¥ä¸‹ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯GPT3.5ä¸å›½å†…æ¸…åä¸æ™ºè°±åç« æ‰€å‘è¡Œçš„ChatGLMæ¨¡å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šå¯¹è¿™ä¸¤ä¸ªæ¨¡å‹è¿›è¡Œç³»ç»Ÿæ€§çš„è¯´æ˜ä¸æ¯”è¾ƒã€‚

## GPT3.5
ç›®å‰å¯¹äºGPT3.5æ‰€é…ç½®çš„APIå·²ç»å¯ä»¥ç©å‡ºå¾ˆå¤šèŠ±æ¥äº†ã€‚ä¸€èˆ¬åœ¨ç›´æ¥åœ¨OPENAIçš„ç½‘ç«™ä¸Šä½¿ç”¨æ˜¯å…è´¹çš„ã€‚å¦‚æœä½ è¦ä½¿ç”¨æ¥ä¸‹æ¥çš„æ¨¡å‹å°±è¦å»OPENAIæ‹¿è´¦æˆ·çš„APIï¼Œæˆ‘æ˜¯åŒå­¦å¸®æˆ‘æ‹¿çš„ï¼Œç”±äºæˆ‘ç»å¸¸è¢«OPENAIå¢™ğŸ˜¥ã€‚**ä½¿ç”¨OPENAIçš„APIçš„ï¼ŒLLMæ¨¡å‹éƒ½æ˜¯åœ¨äº‘ç«¯è®¡ç®—çš„ï¼Œä¸éœ€è¦è‡ªèº«ç”µè„‘çš„ç®—åŠ›ã€‚**

### GPT3.5çš„é…ç½®
è¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆå›°éš¾çš„ï¼Œåªéœ€è¦ç…§ç€OPENAIå®˜ç½‘çš„æ¥å°±å¥½äº†ï¼Œä¸€èˆ¬å°±æ˜¯ç»™ä¸ªKEYç„¶åGITä¸€ä¸‹ä»“åº“ï¼Œjupyter notebooké‡Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨äº†ã€‚ä½†æ˜¯ä¸»è¦å°±æ˜¯è¦é’±ã€‚æ•ˆæœå°±å¯ä»¥ä¸ç”¨å¤šè¯´äº†ï¼Œç›®å‰æœ€å¼ºçš„ã€‚åŸºæœ¬é—®é¢˜ä»–éƒ½èƒ½è§£å†³ï¼Œè¿™ä¸ªä¸€èˆ¬äººä¹Ÿéƒ½å¤Ÿç”¨äº†ã€‚

#### GPTæ„å»ºä¸ªäººç½‘ç«™å’Œå°ç¨‹åºAPIæ¥å£
è¿™ä¸ªç‚¹åè¡¨æ‰¬ä¸€ä¸‹èƒ¡åŒå­¦æ‰¾åˆ°çš„å¥½ä¸œè¥¿ï¼Œæ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªå¥½ç©æ„ç»™æˆ‘ä»¬ç”¨ã€‚æ‹¿å‡ºGPTçš„APIä»¥åå¯ä»¥[åˆ¶ä½œå°ç¨‹åº](https://github.com/waylaidwanderer/node-chatgpt-api)ä»¥åŠ[æ„å»ºä¸ªäººGPTç½‘ç«™](https://github.com/Yidadaa/ChatGPT-Next-Web)ã€‚å…·ä½“æ•™ç¨‹å¯ä»¥åœ¨Googleä¸Šæœä¸€æœã€‚éƒ½æ˜¯æ•™ç¨‹ã€‚åŸºæœ¬å°±æ˜¯Forkä¸€ä¸‹ç„¶åç¨å¾®é…ç½®ä¸€ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ç›®å‰æˆ‘æ˜¯é…ç½®äº†æˆ‘è‡ªå·±çš„ä¸ªäººChatGPTçš„ç½‘ç«™ï¼ŒæŒºå¥½ç”¨çš„ã€‚ç¨€åœŸæ˜é‡‘çš„æ•™ç¨‹é‡Œè¿˜è¯´å¯ä»¥é…ç½®è‡ªå·±çš„åŸŸåç„¶åå°±ä¸ç”¨æŒ‚æ¢¯å­äº†ã€‚æˆ‘æ¯”è¾ƒæ‡’å°±æ²¡å»é…ç½®ã€‚ä½†æ˜¯è¶³å¤Ÿä½¿ç”¨äº†ã€‚ä¸é…ç½®åŸŸåçš„è¯ä¹Ÿåªè¦æŒ‚æ¢¯å­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚è¿™é‡Œçš„æ¢¯å­çš„èŠ‚ç‚¹å°±ä¸ä¸€å®šè¦åœ¨ç¾å›½äº†ï¼Œä½¿ç”¨å®˜ç½‘çš„GPTæœåŠ¡éœ€è¦èŠ‚ç‚¹æŒ‚åœ¨ç¾å›½ç„¶åç»å¸¸è¢«å¢™ï¼Œè‡ªå·±çš„GPTç½‘ç«™ä¸æŒ‡å®šæŒ‚å“ªé‡Œçš„æ¢¯å­ï¼Œåªè¦æŒ‚äº†æ¢¯å­éƒ½èƒ½ç”¨ï¼Œç›®å‰è¿˜æ²¡å´©æºƒè¿‡çš„æƒ…å†µã€‚éè¦è¯´BUGçš„è¯ï¼Œæˆ‘ä¹‹å‰æœ‰ä¸€æ¬¡åœ¨åˆ«çš„ç”µè„‘ä½¿ç”¨å‘ç°ä»–è¾“å‡ºåœ¨å‰ç«¯ç½‘é¡µå±•ç¤ºä¸å®Œæ•´ï¼Œä¸è¿‡è¿™ä¸ªåº”è¯¥æ˜¯å‰ç«¯çš„é—®é¢˜ã€‚ç›®å‰ä¹Ÿå°±å‡ºç°è¿‡ä¸€æ¬¡ï¼Œå¤§è‡´æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚

![ä¸ªäººChatGPTç½‘ç«™](image/SyChat.png "æˆ‘çš„ä¸ªäººGPTç½‘ç«™")
å¯ä»¥çœ‹åˆ°ä»–æ‡‚çš„éå¸¸å¤šï¼Œç”±äºæˆ‘æœ€è¿‘åœ¨è¿›è¡Œä¸€äº›å¤§æ°”å­¦ç§‘ä»¥åŠæœºå™¨å­¦ä¹ äº¤å‰çš„å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç»å¸¸é—®ä»–é—®é¢˜ï¼Œå¤§æ°”å­¦ç§‘çš„ä¸“ä¸šåè¯å®ƒä¹Ÿèƒ½å¤Ÿç­”ä¸Šæ¥ï¼ŒçœŸçš„å¾ˆå‰å®³äº†ï¼Œå¼ºæ¨åŒå­¦ä»¬æ„å»ºä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™ã€‚

![GPTæŒ‡å®šé¢å…·](image/SyChatMj.png "ç»™GPTæˆ´é¢å…·")
åœ¨å’ŒChatGPTèŠå¤©ä¹‹å‰å¯ä»¥å…ˆæŒ‡å®šä»–çš„è¿ç”¨åœºæ™¯ï¼Œä»–å¯ä»¥å……å½“å°çº¢ä¹¦å†™æ‰‹ï¼Œç»ƒä¹ é›…æ€çš„å·¥å…·ç­‰ç­‰ã€‚éå¸¸å¥½ç”¨ã€‚

### Visual ChatGPT
è¿™ä¸ªæ›´æ˜¯ä¸ªé‡é‡çº§äº§å“ï¼Œå®é™…ä¸Šå°±æ˜¯GPT4äº†ï¼Œåœ¨å›¾åƒé¢†åŸŸçœŸçš„å’Œé€ ç¥ä¸€æ ·ã€‚ä½ å¯ä»¥å«ä»–åˆ†å‰²å›¾åƒï¼Œä¹Ÿå¯ä»¥å«ä»–ç”Ÿæˆå›¾ï¼Œå«ä»–ç†è§£å›¾ç‰‡ï¼Œä¸è¿‡è¿™ä¸ªéå¸¸åƒæ˜¾å­˜ã€‚ç‚¹è¿™é‡Œå¯ä»¥è½¬è·³åˆ°ä»–çš„[Guithubé¡¹ç›®](https://github.com/microsoft/TaskMatrix)ã€‚
![Visual Chat](image/demo_short.gif)

å¯ä»¥çœ‹åˆ°å®ƒå¯ä»¥æ ¹æ®ä½ çš„è¦æ±‚ç”Ÿæˆå›¾ç‰‡ï¼Œæå–å‡ºçº¿ç¨¿ç­‰ç­‰ï¼Œæœ€è¿‘Diffusionåˆå‡ºæ¥ä¸€ä¸ªæ¨¡å‹å«åšControlNet,å…·ä½“é…ç½®å¯ä»¥çœ‹[Bç«™çš„æ•™ç¨‹](https://www.bilibili.com/video/BV1fa4y1G71W/?spm_id_from=333.999.0.0&vd_source=628628960a416b6de42d5c7fdc17a7fc)ï¼ˆè¿™ä¸ªæ¨¡å‹ä¹Ÿå¾ˆæœ‰è¶£ï¼Œä»¥åæœ‰æ—¶é—´åšå›¾åƒæ–¹é¢çš„ç¬”è®°å†ç»†èŠå§ï¼‰ã€‚Visual ChatGPTåœ¨å›¾åƒæ–¹é¢å®ç°çš„åŠŸèƒ½å¾ˆå¤§ç¨‹åº¦å’ŒControlNeté‡å ï¼Œä¸è¿‡Visual ChatGPTå¯ä»¥å®ç°å›¾ç”Ÿæ–‡çš„åŠŸèƒ½ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼šæœ¯ä¸šæœ‰ä¸“æ”»å˜›ï¼Œå¤§å®¶æƒ³è¦çœŸçš„ç”Ÿæˆå¥½çš„å›¾åƒè¿˜æ˜¯å»è¯•è¯•å·²ç»å®Œå–„çš„æ‰©æ•£ç”Ÿæˆæ¨¡å‹ã€‚Visual ChatGPTæ‰€èƒ½å®ç°çš„å…·ä½“æ‰€æœ‰åŠŸèƒ½å¦‚ä¸‹å›¾æ‰€ç¤º:
![VisualGBTçš„åŠŸèƒ½](image/GN_VisualChat.png)

Visual ChatGPTé…ç½®çš„è¯å°±æ˜¯åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥:
- Windowsç”µè„‘éœ€è¦å…ˆä¸‹è½½Gitå·¥å…·ï¼ŒLinuxç”µè„‘åˆ™ä¸ç”¨äº†
- åœ¨ä½ æƒ³è¦å®‰è£…çš„åœ°å€è¿è¡Œwin+Rè¾“å…¥CMDæ‰“å¼€å‘½ä»¤è¡Œ
- è¿è¡Œ`git clone https://github.com/microsoft/visual-chatgpt.git`ï¼Œè¿™é‡Œè¦æŒ‚æ¢¯å­ã€‚
- åˆ›å»ºæ–°ç¯å¢ƒï¼Œå½“ç„¶è¿™é‡Œå¯ä»¥ç”¨è‡ªå·±å·²ç»æœ‰çš„ç¯å¢ƒã€‚`conda create -n visgpt python=3.8`
- æ¿€æ´»ç¯å¢ƒ`conda activate visgpt`
- å®‰è£…ä¾èµ–`pip install -r requirements.txt`
- è¿™é‡Œæœ‰ä¸¤ä¸ªæŒ‡ä»¤åˆ†åˆ«é’ˆå¯¹Linuxå’ŒWindowsçš„ï¼Œè¿™é‡Œçš„Your_Private_Openai_Keyè¦æ›¿æ¢æˆè‡ªå·±çš„:
  - windowsè¿è¡Œ`set OPENAI_API_KEY={Your_Private_Openai_Key}`
  - Linuxè¿è¡Œ`export OPENAI_API_KEY={Your_Private_Openai_Key}`
- æ¥ç€å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰“å¼€`python visual_chatgpt.py --load "ImageCaptioning_cuda:0,Text2Image_cuda:0"`
è¿™é‡Œçš„æ¨¡å‹(Imagecaptioning,Text2Image)æ˜¯å¯ä»¥ç»„åˆç€æ¥çš„ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šéƒ¨ç½²åœ¨ä¸åŒçš„æ˜¾å¡ä¸Š(Cuda:n)ï¼Œå…¶ä¸­ChatGPTæ˜¯åˆ©ç”¨äº‘ç«¯è®¡ç®—è¿”å›çš„ç»“æœï¼Œæ‰€ä»¥ä¸å ç”¨ç”µè„‘ç®—åŠ›ï¼Œä½†æ˜¯ç”Ÿæˆå›¾åƒçš„è¿‡ç¨‹æ˜¯åœ¨æœ¬åœ°ç”µè„‘ä¸Šç”Ÿæˆçš„ã€‚æ‰€ä»¥ç”µè„‘è¿˜æ˜¯éœ€è¦æä¾›ç”Ÿæˆå›¾åƒæ‰€è¦çš„ç®—åŠ›ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šå¯åŠ¨ä¸Šè¿°ä¸¤ä¸ªæ¨¡å‹å¤§æ¦‚ä½¿ç”¨äº†7.5Gçš„æ˜¾å­˜ã€‚**éœ€è¦æ³¨æ„çš„æ˜¯ImageCaptioningè¿™ä¸ªæ¨¡å—æ˜¯ä¸€å®šè¦åŠ è½½çš„ï¼Œä¸ç„¶ä¼šæŠ¥é”™**(è¦ç”Ÿæˆå›¾åƒé¦–å…ˆè¦äº†è§£å›¾åƒå˜›)ã€‚**è¿˜æœ‰ä¸€ä¸ªä¸€å®šä¸€å®šè¦æ³¨æ„çš„ç‚¹,æ‰€æœ‰çš„å›¾åƒç”Ÿæˆæ¨¡å‹ä¸‹è½½ä¸‹æ¥å¤§æ¦‚åœ¨200Gä¸Šä¸‹,å¤§å®¶ä¸€å®šè¦æ³¨æ„ä¸‹è‡ªå·±çš„ç¡¬ç›˜å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼ï¼**

å…·ä½“ç®—åŠ›è¦æ±‚å¦‚ä¸‹:
| Foundation Model        | GPU Memory (MB) |
|------------------------|-----------------|
| ImageEditing           | 3981            |
| InstructPix2Pix        | 2827            |
| Text2Image             | 3385            |
| ImageCaptioning        | 1209            |
| Image2Canny            | 0               |
| CannyText2Image        | 3531            |
| Image2Line             | 0               |
| LineText2Image         | 3529            |
| Image2Hed              | 0               |
| HedText2Image          | 3529            |
| Image2Scribble         | 0               |
| ScribbleText2Image     | 3531            |
| Image2Pose             | 0               |
| PoseText2Image         | 3529            |
| Image2Seg              | 919             |
| SegText2Image          | 3529            |
| Image2Depth            | 0               |
| DepthText2Image        | 3531            |
| Image2Normal           | 0               |
| NormalText2Image       | 3529            |
| VisualQuestionAnswering| 1495            |

æ‰€ä»¥è¦è¿è¡Œæ‰€æœ‰çš„æ¨¡å‹å¤§æ¦‚éœ€è¦40Gçš„æ˜¾å­˜ï¼Œæˆ‘ç©ä¸èµ·ï¼Œå¸Œæœ›ä»¥åå¯ä»¥ç©ä¸€ä¸‹å§TATã€‚

![Visual Chatgptçš„æµç¨‹å›¾](image/Yl-visualchat.jpg) 
ä¸Šé¢è¿™å¼ å›¾å°±æ˜¯Visual ChatGPTåŸºæœ¬çš„æµç¨‹ç»“æ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°ä»–å°±æ˜¯ä»¥ChatGPTä½œä¸ºä¸€ä¸ªâ€œå¤§è„‘â€æ¥æ§åˆ¶å…¶ä»–çš„â€œçœ¼ç›â€ï¼ˆå›¾åƒæ¨¡å‹ï¼‰çš„ã€‚æˆ‘ä¸Šé¢ä¹Ÿæåˆ°è¿‡ï¼Œåªä¸è¿‡å¤§è„‘åœ¨äº‘ç«¯ï¼Œçœ¼ç›æ˜¯åœ¨è‡ªå·±ç”µè„‘ä¸Šï¼Œæ‰€ä»¥éœ€è¦æ˜¾å­˜è¿è¡Œã€‚

ç›®å‰æˆ‘è‡ªå·±ä¹Ÿéƒ¨ç½²å¥½äº†è¿™ä¸ªæ¨¡å‹ï¼Œå°è¯•äº†ä¸€ä¸‹æ•ˆæœï¼Œå…¶å®æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ¯”å¦‚æˆ‘ç»™ä»–çš„æŒ‡ä»¤æ˜¯â€œç”»ä¸€ä¸ªäºšæ´²å¥³äººâ€ï¼Œä½†æ˜¯ä»–æœ‰æ—¶ä¼šç”»å‡ºè„¸å´©åçš„å¥³äººã€‚çŒ«ç‹—çš„æ•ˆæœéƒ½è¿˜å¯ä»¥ã€‚ä½†æ˜¯çœŸäººå›¾ç”»å‡ºæ¥ä¸å¤ªå¥½çœ‹ï¼ˆç›¸æ¯”äºä¸“ä¸šçš„æ‰©æ•£æ¨¡å‹ï¼‰ã€‚è¿™å¾ˆæ˜æ˜¾æ˜¯æœ¬åœ°å›¾åƒæ¨¡å‹ç”Ÿæˆçš„é—®é¢˜ï¼Œä¸æ˜¯æ¨¡å‹çš„ç†è§£æœ‰è¯¯ï¼ˆChatGPTéƒ¨ç½²åœ¨äº‘ç«¯ï¼Œå¹¶ä¸”æˆ‘ç»™çš„å…³é”®è¯å¾ˆç®€å•ï¼‰ã€‚ä½†å®é™…ä¸Šæˆ‘å°è¯•äº†ä¸€ä¸‹ï¼Œåœ¨ä¸“é—¨çš„æ‰©æ•£ç”Ÿæˆçš„æ¨¡å‹é‡Œè¾“å…¥åŒæ ·çš„æç¤ºè¯æ•ˆæœä¹Ÿå·®ä¸å¤šã€‚æ‰€ä»¥çš„è¯æˆ‘è§‰å¾—è¿™æ˜¯Chatgptç†è§£åç”Ÿæˆçš„æç¤ºè¯ä¸æ˜¯å¾ˆå¯¹ï¼Œåœ¨æ‰©æ•£ç”Ÿæˆæ¨¡å‹é‡Œé¢æœ‰ä¸€ä¸ªä¸“é—¨çš„åæ¨æç¤ºè¯çš„æ¨¡å‹å«åš`Tagger`ï¼Œå°±æ˜¯æˆ‘ä»¬è¾“å…¥ä¸€å¼ å›¾åƒï¼Œä»–å°±èƒ½ç”Ÿæˆè¿™ä¸ªå›¾åƒçš„æç¤ºè¯ã€‚æˆ‘è§‰å¾—æœªæ¥çœŸè¦æ”¹è¿›çš„è¯ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªæ–¹å‘ã€‚ä¹Ÿå°±æ˜¯
**è¾“å…¥->ChatGLM+Taggerè€¦åˆ->è¾“å…¥æ‰©æ•£ç”Ÿæˆæ¨¡å‹->ç”Ÿæˆå›¾åƒ->è¾“å‡º**è¿™ç§ç»“æ„ï¼Œæˆ‘è§‰å¾—å¯ä»¥å®ç°ã€‚ï¼ˆä¸è¿‡æˆ‘ä¹Ÿæ˜¯ä¸ªå°èœé¸¡ï¼Œè¿™åªæ˜¯æˆ‘çš„ä¸€ä¸ªæ‹™è§ï¼‰ã€‚

ä¸‹é¢å°±æ˜¯ä¸€äº›æˆ‘è¿è¡Œçš„ç»“æœå›¾ï¼Œæˆ‘æµ‹è¯•äº†ä»–æ–‡ç”Ÿå›¾å’Œçœ‹å›¾è¯´è¯çš„èƒ½åŠ›ã€‚
- æ–‡ç”Ÿå›¾çš„èƒ½åŠ›
   - è®©Visual ChatGPTç»™æˆ‘ç”»ä¸€åªçŒ«ã€‚
   ![gptç”»çŒ«](image/Xgvisualchat.jpg)
   - è®©Visual ChatGPTç»™æˆ‘ç”»ä¸€ä¸ªæˆ‘ä»¬Labçš„Logo
   ![å®éªŒå®¤Logo](image/Xgvisualchat3.jpg)
   - è®©Visual ChatGPTå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªäºšæ´²å¥³äººçš„å½¢è±¡ï¼Œå‘ƒæ€ä¹ˆè¯´å‘¢ï¼Œå…¶å®ä¸ç®—å´©åï¼Œåªæ˜¯ä¸ç¬¦åˆç°åœ¨çš„å®¡ç¾ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒåå¹´å‰çš„ç…§ç‰‡ï¼Ÿ
   ![gptç”»å¥³ç”Ÿ](image/xgvisualchat4.jpg)

- å›¾ç”Ÿæ–‡çš„èƒ½åŠ›
   - è®©Visual ChatGPTåˆ¤æ–­å›¾åƒé‡Œæœ‰ä»€ä¹ˆï¼Ÿï¼ˆæ„Ÿè°¢å´åŒå­¦å‡æœŸå‡ºæ¸¸æä¾›çš„ç´ æå“ˆå“ˆå“ˆï¼‰
   ![visualçœ‹å›¾](image/Xgvisualchat2.jpg)
   - è®©Visual ChatGPTåˆ¤æ–­ç–¾ç—…ï¼Œè¿™å¼ å›¾æ˜¯æ¹¿ç–¹çš„å›¾ç‰‡ï¼ŒGPTå›ç­”çš„å¤§å·®ä¸å·®ã€‚
   ![visualçœ‹æ¹¿ç–¹](image/Xgvisualchat5.jpg)
   - è®©Visual ChatGPTåˆ¤æ–­Xå…‰ç‰‡ï¼Œå›¾é‡Œçš„ç—…äººçš„Xå…‰ç‰‡éª¨æŠ˜äº†ã€‚GPTå®Œç¾å›ç­”ã€‚
   ![visualçœ‹éª¨æŠ˜](image/Xgvisualchat6.jpg)

ç„¶åçœ‹ä»¥ä¸Šç”Ÿæˆçš„å›¾ç‰‡æˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¯´ç›®å‰ä»–æœ‰ä¸€ç‚¹å°BUGï¼Œå°±æ¯”å¦‚è¯´æˆ‘åœ¨ä¸Šæ–‡ä¸­æåˆ°äº†æˆ‘æƒ³è¦å’Œä½ è¯´ä¸­æ–‡ï¼Œä½†æ˜¯è¯´ç€è¯´ç€ä»–åˆä¼šç”¨è‹±æ–‡å’Œä½ äº¤æµï¼Œè¿˜æœ‰å°±æ˜¯å®é™…ä¸Šè¿™ç©æ„å¥½åƒæš‚æ—¶æ— æ³•åœ¨å›¾ç‰‡é‡Œç”Ÿæˆä¸­æ–‡ï¼Œå‚è€ƒæˆ‘å¸®å®éªŒå®¤ç”Ÿæˆçš„Logoï¼Œé‡Œé¢åƒæ˜¯ä¸€äº›ä¹±ç æˆ–æ˜¯ç½—é©¬æ–‡ä¹‹ç±»çš„ï¼Ÿ

ç›®å‰å…³äºChatGPTæˆ‘å¤§æ¦‚åšåˆ°çš„å°±æ˜¯è¿™äº›ï¼Œåé¢ä¼šç»§ç»­ç ”ç©¶è¡¥å……ä¸€äº›ä¸œè¥¿ã€‚psï¼šæœ€è¿‘æ²™ç‰¹çš„MiniChatGPT4éå¸¸çš„ç«ï¼Œä½†æ˜¯æˆ‘çš„å¸ˆå…„è¯´æ•ˆæœä¸è¡Œæˆ‘æ²¡æœ‰é…ç½®ï¼Œè¿˜æœ‰ä¸€ä¸ªAutoGPTï¼Œé‚£ä¸ªä¹Ÿæ˜¯ä¸ªç¥ä¸€èˆ¬çš„æ¨¡å‹åœ¨æˆ‘çœ‹æ¥ï¼Œä½ ç»™ä¸€ä¸ªä»»åŠ¡ï¼Œç„¶åä»–ä¼šæœ‰ä¸¤ä¸ªGPTæ‰“æ¶æ¥äº’ç›¸çº é”™å¸®ä½ å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œè¿™çœŸçš„å¾ˆç¥å¥‡ï¼Œé¢‡æœ‰ä¸€ç§æ‰¾äººç»™ä½ æ‰“å·¥çš„æ„Ÿè§‰ï¼Œä½†æ˜¯å¬è¯´è¦æ”¶è´¹ï¼Œè€Œä¸”æˆ‘ä¹Ÿçœ‹åˆ°ä¸€äº›åšå®¢é‡Œé¢å†™åˆ°AutoGPTéš¾ä»¥æ”¶æ•›ï¼ˆæ‰¾ä¸åˆ°æœ€ç»ˆçš„è§£å†³åŠæ³•ï¼‰ï¼Œæˆ‘æœ¬äººç”µè„‘ç®—åŠ›ä¹Ÿä¸è¶³æ‰€ä»¥è¿˜æ²¡å°è¯•ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ç­‰ä»¥åAutoGPTç‰ˆæœ¬ç¨³å®šäº†å¯ä»¥åšå°è¯•ã€‚

## ChatGLM
è‡ªä»ChatGLMå‡ºæ¥ä»¥åï¼Œæ¸…åå’Œæ™ºè°±AIè”æ‰‹æäº†ä¸€ä¸ªæ¨¡å‹å«åšChatGLM,ChatGLMç›®å‰åˆæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯[ChatGLM-6b](https://github.com/THUDM/ChatGLM-6B)ï¼Œä¸€ä¸ªæ˜¯[ChatGLM-130b](https://github.com/THUDM/GLM-130B)ã€‚ChatGLM-130bä¸æ˜¯æ™®é€šäººå®¶èƒ½ç©èµ·çš„ã€‚æ˜¾å­˜è¦æ±‚æé«˜ã€‚
| **Hardware**    | **GPU Memory** | **Quantization** | **Weight Offload** |
| --------------- | -------------- | ---------------- | ------------------ |
| 8 * A100        | 40 GB          | No               | No                 |
| 8 * V100        | 32 GB          | No               | Yes (BMInf)        |
| 8 * V100        | 32 GB          | INT8             | No                 |
| 8 * RTX 3090    | 24 GB          | INT8             | No                 |
| 4 * RTX 3090    | 24 GB          | INT4             | No                 |
| 8 * RTX 2080 Ti | 11 GB          | INT4             | No                 |

ä½ çœ‹çœ‹äººå®¶è¿™æ‹¿æ¥è®­ç»ƒçš„æ˜¾å¡ã€‚æˆ‘æš‚æ—¶å°±ç©ä¸èµ·äº†ï¼ŒChatGLM-130bä¸€å…±æœ‰130äº¿å‚æ•°ï¼ŒChatGLM-6bé¢å‘æ™®é€šç¾¤ä¼—çš„ï¼Œå‚æ•°é‡æ˜¯62äº¿ã€‚ä¹Ÿå¯ä»¥è¿›è¡Œå¾®è°ƒï¼Œè¿™ä¸ªåé¢ä¼šè¯¦ç»†è®²ã€‚æˆ‘ç›®å‰ä¸»è¦çš„æ¢ç´¢éƒ½æ˜¯åŸºäºChatGLM-6bçš„æ¨¡å‹çš„ã€‚**æ¥ä¸‹æ¥çš„æ‰€æœ‰ä½¿ç”¨åˆ°çš„ChatGLMæ¨¡å‹éƒ½æ˜¯ChatGLM-6b**ã€‚
è€ŒChatGLMåˆåˆ†ä¸ºä¸‰ä¸ªå­ç‰ˆæœ¬ï¼š
- FP16æ— é‡åŒ–ç‰ˆæœ¬
- INT8é‡åŒ–ç‰ˆæœ¬
- INT4é‡åŒ–ç‰ˆæœ¬


ChatGLM-6bå„ä¸ªç‰ˆæœ¬çš„æ˜¾å­˜è¦æ±‚å¦‚ä¸‹æ‰€ç¤ºï¼š
| **é‡åŒ–ç­‰çº§**   | **æœ€ä½ GPU æ˜¾å­˜**ï¼ˆæ¨ç†ï¼‰ | **æœ€ä½ GPU æ˜¾å­˜**ï¼ˆé«˜æ•ˆå‚æ•°å¾®è°ƒï¼‰ |
| -------------- | ------------------------- | --------------------------------- |
| FP16ï¼ˆæ— é‡åŒ–ï¼‰ | 13 GB                     | 14 GB                             |
| INT8           | 8 GB                     | 9 GB                             |
| INT4           | 6 GB                      | 7 GB                              |

æˆ‘çš„ç”µè„‘ç›®å‰æ˜¯å®‰è£…äº†INT8ä¸INT4ä¸¤ä¸ªç‰ˆæœ¬,FP16æœ€ä½è¦æ±‚13Gæ˜¾å­˜ï¼Œæ‰€ä»¥æˆ‘ç©ä¸äº†ï¼Œè¿è¡Œçš„è¯å°±ä¼šæœ‰å¦‚ä¸‹æŠ¥é”™ï¼š
`OutOfMemoryError: CUDA out of memory`

ChatGLMçš„å¸ƒç½®æµç¨‹å¦‚ä¸‹ï¼š
- åŒæ ·ä¸‹è½½GITï¼Œä¸Šæ–‡å·²ç»æåˆ°ï¼Œè¿™é‡Œä¸å†è¿‡å¤šèµ˜è¿°ã€‚
- `git clone https://huggingface.co/THUDM/chatglm-6b`
- ä»Hugging faceä¸Šä¸‹è½½æ¨¡å‹ï¼Œä¸‹è½½ä¹‹åæ”¾åœ¨æœ¬åœ°æ–‡ä»¶å¤¹ã€‚
   - [ChatGLM-FP16](https://huggingface.co/THUDM/chatglm-6b)
   - [ChatGLM-INT8](https://huggingface.co/THUDM/chatglm-6b-int8)
   - [CHATGLM-INT4](https://huggingface.co/THUDM/chatglm-6b-int4)
- `cd ChatGLM-6B`
- å°†æ–‡ä»¶ä¸­çš„`web_demo.py`æ–‡ä»¶å’Œ`cli_dem.py`æ–‡ä»¶ä¸­çš„æ¨¡å‹å‚æ•°æ”¹æˆæœ¬åœ°æ¨¡å‹ï¼Œå‡è®¾è¯´ä¸Šä¸€æ­¥ä¸­çš„æ¨¡å‹æˆ‘ä¸‹è½½åœ¨`D:\ChatGLM-INT8`,é‚£ä¹ˆè¿™é‡Œå°±æ˜¯å°†æ¨¡å‹ä¸­çš„`THUDM/ChatGLM-6B`æ›¿æ¢ä¸º`D:\ChatGLM_INT8`ã€‚
- `conda activate {your_env_name}`å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ
- `python web_demo.py` or `python cli_demo.py`

ChatGLM-6b INT8ç‰ˆæœ¬å’ŒINT4ç‰ˆæœ¬çš„æ•ˆæœå·®åˆ«æ„Ÿè§‰ä¸æ˜¯å¾ˆå¤§ï¼Œæˆ‘æ„Ÿè§‰INT8ç‰ˆæœ¬ä¼šæ›´å¸¦æœ‰äººç±»çš„æ„Ÿæƒ…ä¸€äº›ã€‚

è¿™æ˜¯INT8é‡åŒ–çš„ChatGLM-6bï¼š

![int8](image/int8.png)

è¿™æ˜¯INT4é‡åŒ–çš„ChatGLM-6bï¼š

![int4](image/int4.png)

å…·ä½“çš„å¤§å®¶é…ç½®å¥½å¯ä»¥è‡ªå·±å»å°è¯•ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—è¿™æš‚æ—¶æ˜¯ä¸­æ–‡é‡Œé¢åšçš„æœ€å¥½çš„äº†ã€‚å®é™…ä¸Šå¸‚é¢ä¸Šè¿˜æœ‰ä¸€ä¸ªç«å“ï¼Œ[å¤æ—¦çš„MOSS](https://github.com/OpenLMLab/MOSS)ï¼ˆæµæµªåœ°çƒé‡Œçš„MOSSç°å®ç‰ˆï¼‰ï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰é…ç½®ï¼Œä½†æ˜¯æˆ‘çš„å¸ˆå…„é…ç½®åœ¨Labäº†ï¼Œæ®æˆ‘æ‰€çŸ¥æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œè€Œä¸”æˆ‘ç”µè„‘åƒä¸å¤ªåŠ¨ï¼Œæ‰€ä»¥æˆ‘æ²¡é…ç½®ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹ä¸Šé¢çš„é“¾æ¥è‡ªå·±é…ç½®ä¸€ä¸‹ç©ã€‚

MOSSçš„é…ç½®æ˜¾å­˜è¦æ±‚ï¼š
| é‡åŒ–ç­‰çº§ | åŠ è½½æ¨¡å‹ | å®Œæˆä¸€è½®å¯¹è¯ï¼ˆä¼°è®¡å€¼ï¼‰ | è¾¾åˆ°æœ€å¤§å¯¹è¯é•¿åº¦2048 |
| -------- | -------- | ---------------------- | -------------------- |
| FP16     | 31GB     | 42GB                   | 81GB                 |
| Int8     | 16GB     | 24GB                   | 46GB                 |
| Int4     | 7.8GB    | 12GB                   | 26GB                 |

æ²¡ä»€ä¹ˆå¥½è¯„ä»·çš„ï¼Œç©ä¸èµ·ç©ä¸èµ·QAQã€‚

### ChatGLMçš„å¾®è°ƒ

æ¥ç€è¯´å›æ¥ChatGLMçš„å¾®è°ƒï¼Œè¿™ä¸ªç©æ„æ¯”è¾ƒæœ‰è¶£ï¼Œä¹Ÿæ˜¯ç›®å‰å¾ˆå¤šäººæƒ³è¦æ”»å…‹çš„éš¾é¢˜ï¼Œæ®æˆ‘æ‰€çŸ¥ç°åœ¨å¾ˆå¤šäººåœ¨åšè¿™ä¸ªï¼ˆåŒ—äº¬çš„å¾®è°ƒå¸ˆçš„æ—¶è–ªæ˜¯17åˆ€!!ï¼‰ï¼ŒGLMå¼ºå°±å¼ºåœ¨å…¥é—¨çº§æ˜¾å¡å¯ä»¥å®ç°å¾®è°ƒï¼Œè¿™æ˜¯éå¸¸ç‰›é€¼çš„ï¼Œç›®å‰å¾®è°ƒæ–¹æ³•ä¸»è¦æœ‰ä¸‰ç§ï¼š
- LoRA
- P-Tuning V2
- Freeze
æœ‰ä¸€ä¸ªgithubå¤§ä½¬å®ç°äº†ä¸‰ç§æ–¹æ³•é›†æˆçš„ä½ç§©å¾®è°ƒæ–¹æ³•ï¼ŒæŒ‰ç…§ä»–çš„æ–¹æ³•å¯ä»¥è¿›è¡Œå¾®è°ƒã€‚[é“¾æ¥ç‚¹è¿™é‡Œ](https://github.com/hiyouga/ChatGLM-Efficient-Tuning)ã€‚
ä½†æ˜¯è¿™ä¸ªå¾®è°ƒå¯¹ç”µè„‘è¦æ±‚å¾ˆé«˜ï¼Œå°±ç®—é‡åŒ–æ¨¡å‹ä¹Ÿè¦è®­ç»ƒå¾ˆä¹…ï¼Œæ®æˆ‘æ‰€çŸ¥å®˜æ–¹50Wçš„æ•°æ®è¦ç”¨4090(24Gæ˜¾å­˜)è®­ç»ƒ60å°æ—¶ï¼ˆæ‰€ä»¥ä¸€èˆ¬ç©è¿™ä¸ªéƒ½æ˜¯ç§ŸæœåŠ¡å™¨å»ç©ï¼ŒA100-80Gç‰ˆæœ¬ä¸€èˆ¬ç§Ÿèµ·æ¥å·®ä¸å¤šæ˜¯9å—é’±ä¸€ä¸ªå°æ—¶ï¼‰ï¼Œæˆ‘çš„æ˜¾å¡è¿™ä¸¤å¤©å·²ç»è·Ÿæˆ‘å¥”æ³¢äº†å¥½ä¹…ï¼Œ ä¸æƒ³å†æŠ˜è…¾ä»–äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¿˜æ²¡å»å°è¯•ï¼Œç­‰è©¹è€å¸ˆæŠŠæ–°çš„æ˜¾å¡ææ¥æˆ‘å†æµ‹è¯•å§TATã€‚

å¾®è°ƒçš„å…·ä½“é…ç½®è¦æ±‚:

| Fine-tune method | Batch size | Mode |  GRAM  | Speed |
| ---------------- | ---------- | ---- | ------ | ----- |
| LoRA (r=8)       |     16     | FP16 |  28GB  | 8ex/s |
| LoRA (r=8)       |     8      | FP16 |  24GB  | 8ex/s |
| LoRA (r=8)       |     4      | FP16 |  20GB  | 8ex/s |
| LoRA (r=8)       |     4      | INT8 |  10GB  | 8ex/s |
| P-Tuning (p=16)  |     4      | FP16 |  20GB  | 8ex/s |
| P-Tuning (p=16)  |     4      | INT8 |  16GB  | 8ex/s |
| P-Tuning (p=16)  |     4      | INT4 |  12GB  | 8ex/s |
| Freeze (l=3)     |     4      | FP16 |  24GB  | 8ex/s |
| Freeze (l=3)     |     4      | INT8 |  12GB  | 8ex/s |

| RM  method       | Batch size | Mode |  GRAM  | Speed |
| ---------------- | ---------- | ---- | ------ | ----- |
| LoRA (r=8) + rm  |     4      | FP16 |  22GB  | -     |
| LoRA (r=8) + rm  |     1      | INT8 |  11GB  | -     |

| RLHF method      | Batch size | Mode |  GRAM  | Speed |
| ---------------- | ---------- | ---- | ------ | ----- |
| LoRA (r=8) + ppo |     4      | FP16 |  23GB  | -     |
| LoRA (r=8) + ppo |     1      | INT8 |  12GB  | -     |

ç›®å‰è¿˜æœ‰ä¸€ä¸ªæ¨¡å‹çš„å¾®è°ƒï¼Œé‚£ä¸ªç®—æ˜¯ä¸€ç«™å¼çš„æ•´åˆåŒ…ï¼Œæ˜¯Bç«™ä¸€ä¸ªUPä¸»æ•´åˆçš„ï¼Œ[é“¾æ¥åœ¨è¿™](https://www.bilibili.com/video/BV1P24y1L7Ge/?spm_id_from=333.337.search-card.all.click)ã€‚è¿™ä¸ªæ•´åˆåŒ…æ˜¯ç”±æ•°æ®é›†åˆ¶ä½œä¸æ¨¡å‹è°ƒæ•´ä¸¤éƒ¨åˆ†ç»„æˆï¼Œ**ç›®å‰ä»…å®ç°äº†LoRAçš„å¾®è°ƒæ–¹æ³•**ï¼Œå¦‚æœæƒ³åˆ†åˆ«æŸ¥çœ‹å®ç°æ–¹æ³•å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„é“¾æ¥:
- [æ•°æ®é›†åˆ¶ä½œ](https://github.com/huang1332/finetune_dataset_maker)
- [æ¨¡å‹å¾®è°ƒ](https://github.com/mymusise/ChatGLM-Tuning)
æˆ‘æš‚æ—¶ä¹Ÿä½¿ç”¨äº†è¿™ä¸ªï¼Œåªæ˜¯ç”¨ä»–çš„æ¨¡å‹æˆ‘çš„æ˜¾å­˜ä¼šæŠ¥é”™ä¸è¶³ï¼Œç„¶åæˆ‘æŠŠå®ƒè°ƒåˆ°æˆ‘çš„æœ¬åœ°æ¨¡å‹ä¸Šï¼ˆå¾®è°ƒè¿™ä¸ªåœ°æ–¹è¦æ”¹çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼‰ï¼Œå°±ä¼šå‡ºç°ä¸€äº›ä¸çŸ¥åçš„æŠ¥é”™ã€‚
æ¯”å¦‚`Only Tensors of floating point and complex dtype can require gradients`ï¼Œè¿™ä¸ªçš„è§£å†³æ–¹æ³•å°±æ˜¯ChatGLMæœ€åˆå§‹ç‰ˆæœ¬æœªä½œä»»ä½•ä¿®æ”¹çš„æ›¿æ¢åˆ°è¿™é‡Œçš„ä»£ç å°±å¯ä»¥è§£å†³ï¼Œç„¶åæˆ‘è¿™é‡Œåˆé‡åˆ°äº†ä¸€ä¸ª`self and mat2 must have the same dtype`ï¼Œè¿™ä¸ªBUGéå¸¸çš„ç¥å¥‡ï¼Œæˆ‘åœ¨Googleä¸Šæ‰¾äº†ä¸¤å¤©ä¹Ÿæ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œåæ¥æˆ‘å‘ç°å¾ˆå¤šäººä¹Ÿåœ¨å®˜æ–¹çš„å¸–å­ä¸‹è¯¢é—®è¿™ä¸ªé—®é¢˜ï¼Œçœ‹æ¥è¿™ä¸ªBUGå®˜æ–¹ä¹Ÿä¸å¥½è½»æ˜“è§£å†³ã€‚åŠ ä¸Šæˆ‘æœ€è¿‘æ¯”è¾ƒå¿™ï¼Œæ‰€ä»¥è¿™ä¸ªå¾®è°ƒæˆ‘è¿˜æ²¡å®Œæˆï¼Œç­‰åé¢æœ‰ç©ºå†å»Debugæˆ–è€…è¿˜æ˜¯ç­‰è©¹è€å¸ˆä¹°çš„4090åˆ°äº†æˆ‘å°è¯•FP16ç‰ˆæœ¬å§ã€‚å› ä¸ºæˆ‘çœ‹Googleç›®å‰å‡ºé—®é¢˜çš„éƒ½æ˜¯INT8å’ŒINT4é‡åŒ–ç‰ˆæœ¬ï¼ˆéƒ½æ˜¯ç©·äººTATï¼‰ï¼Œæ‰€ä»¥FP16ç‰ˆæœ¬åº”è¯¥ä¸ä¼šæœ‰å•¥å¤§é—®é¢˜ï¼Œè€Œä¸”FP16ç‰ˆæœ¬å®é™…ä¸Šåœ¨æˆ‘ç”µè„‘ä¸Šè¿è¡Œèµ·æ¥äº†ï¼ˆDebugæ—¶å€™å°è¯•çš„ï¼‰ï¼Œåªæ˜¯æ˜¾å­˜ä¸è¶³æŠ¥é”™äº†ã€‚

ä¸è¿‡è¯è¯´å›æ¥è¿™ä¸ªå¾®è°ƒæˆ‘æ··åˆ°äº†ä½œè€…ç¾¤é‡Œå­¦ä¹ ï¼Œæˆ‘å‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚ä»¥ä¸‹å‡ ç‚¹ï¼š
- Over fittingï¼Œè¿™é‡Œçš„è¿‡æ‹Ÿåˆå’Œæˆ‘ä»¬ä¹‹å‰ç†è§£çš„ä¸ä¸€æ ·ï¼Œä»–è¿‡äºæ‹Ÿåˆé—®é¢˜çš„è¯å°±ä¼šç…§ç€ä½ ç»™çš„é—®é¢˜åŸæ¨¡åŸæ ·å›ç­”ï¼Œä¸ä¼šå»ç†è§£ä½ é—®é¢˜å’Œå›ç­”çš„æ„æ€ã€‚
- è®­ç»ƒé—å¿˜ï¼Œè®°å¾—ä¸“ä¸šçŸ¥è¯†ç„¶åä¸è®°å¾—æ€ä¹ˆè¯´è¯äº†ï¼Œä½ é—®ä»–æ•°å­¦å¾ˆçŒ›ï¼Œä½†æ˜¯é—®ä»–ä½ æ˜¯è°ä»–å°±ä¸çŸ¥é“äº†
- é‡å¤è¾“å‡ºï¼Œå›ç­”é—®é¢˜ä¼šé‡å¤å›ç­”ï¼Œæ¯”å¦‚è¯´é—®ä»–ä½ æ˜¯è°ï¼Œä»–ä¼šè¯´ä»–æ˜¯æ¸…åçš„èŠå¤©æœºå™¨äººChatGLM-6bbbbbbbbbbbbbbbb.....

æ€»çš„æ¥è¯´ï¼Œå¾®è°ƒå°±åƒä¸€ä¸ªå°å­©è®­ç»ƒåç§‘ï¼Œè¦æˆ‘è¯„ä»·çš„è¯ï¼Œåšä¸ªä¸æ°å½“çš„æ¯”å–»ï¼šGPT4è¯´é«˜è€ƒèƒ½è€ƒåˆ°660ï¼Œé‚£ä¹ˆGLMå°±å¯ä»¥è¾¾åˆ°550ï¼Œä½†æ˜¯æ­¤æ—¶æ˜¯æ•°å­¦110ï¼Œè‹±è¯­110ï¼Œå¾®è°ƒä»¥åæ€»åˆ†ä»ç„¶æ˜¯550ï¼Œä½†æ˜¯æ•°å­¦130ï¼Œè‹±è¯­90è¿™ç§æ„Ÿè§‰ã€‚

### Visual-ChatGLM
æ—¢ç„¶æœ‰Visual ChatGPTï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰Visual ChatGLMå‘¢ï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°è¿˜çœŸæœ‰ç±»ä¼¼çš„æ¨¡å‹ï¼Œè¿™å…¶å®å°±æ˜¯Visual ChatGPTçš„â€œç›—ç‰ˆâ€ã€‚ä»–èƒ½å®ç°æ–‡ç”Ÿå›¾çš„åŠŸèƒ½ã€‚æˆ‘æŠ˜è…¾äº†å¾ˆä¹…ï¼Œå‘ç°Bç«™å¤§ä½¬å·²ç»åšäº†æ•´åˆåŒ…ï¼Œ[é“¾æ¥åœ¨è¿™](https://www.bilibili.com/video/BV1Wa4y1V77o/?spm_id_from=333.999.0.0&vd_source=628628960a416b6de42d5c7fdc17a7fc)ã€‚ç„¶åè¿™ä¸ªæ¨¡å‹æ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆçš„:
- ChatGLM
- StableDiffusion
- çˆ¬è™«ç¨‹åºï¼ˆè¿™é‡Œçš„çˆ¬è™«ç¨‹åºæ˜¯UPä¸»è‡ªå·±åšçš„ï¼Œå¯ä»¥è®©ChatGLMå»é˜…è¯»ç½‘ä¸Šçš„ä¿¡æ¯(CSDN,çŸ¥ä¹ï¼ŒBç«™è¯„è®ºç­‰ç­‰)åå†å›ç­”æˆ‘ä»¬ï¼‰

åœ¨ä½¿ç”¨è¿™ä¸ªæ•´åˆåŒ…ä¹‹å‰éœ€è¦å…ˆå®‰è£…Bç«™å¦ä¸€ä¸ªAIç»˜ç”»é¢†åŸŸçš„å¤§ä½¬æ‰€ä½œçš„æ•´åˆåŒ…ï¼Œ[é“¾æ¥åœ¨è¿™](https://www.bilibili.com/video/BV1iM4y1y7oA/?spm_id_from=333.999.0.0&vd_source=628628960a416b6de42d5c7fdc17a7fc)ï¼Œä¸‹è½½ä¹‹åç…§ç€é…ç½®å°±å¥½ã€‚åªè¦æ”¹ä¸ªç«¯å£å·å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œ**éœ€è¦è¯´æ˜çš„æ˜¯ç»˜ç”»æœ€å°‘éœ€è¦4Gæ˜¾å­˜ï¼Œæ‰€ä»¥æŒ‰ç…§æˆ‘çš„æ˜¾å¡å°±æ˜¯8+4(åˆ†ç»™ChatGLM-8Gè¿›è¡Œäº¤æµï¼Œåˆ†ç»™Stable Diffusion-4Gç»˜ç”»)**ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±è¦æ±‚æ¥è°ƒæ•´è¿™ä¸ªæ˜¾å­˜åˆ†é…ã€‚æ¥ä¸‹æ¥åªè¦æŒ‰ç…§ä¸Šé¢Bç«™UPä¸»çš„è§†é¢‘ä¸€æ­¥æ­¥é…ç½®å°±å¥½äº†ï¼Œéå¸¸ç®€å•ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹çœ‹æ•ˆæœå§ã€‚
- è®©ä»–å¸®æˆ‘ç”»ä¸€å¼ å¥³å­©çš„ç…§ç‰‡
   ![glmç”»å¥³å­©ç…§ç‰‡](image/Nhglm.jpg)
- è®©ä»–å¸®æˆ‘ç”»ä¸€å¼ çŒ«çš„ç…§ç‰‡
   ![glmç”»çŒ«](image/Mglm.jpg)
-è®©ä»–å¸®æˆ‘ç”»ç©¿ç€æ ¡æœçš„å¥³ç”Ÿ
   ![glmç”»æ ¡æœå¥³å­©](image/Xfglm.jpg)
 
å¯ä»¥çœ‹åˆ°é™¤äº†ç”»çŒ«æ•ˆæœéƒ½ä¸æ˜¯å¾ˆå¥½ï¼ˆæœ‰ç‚¹ææ€–è°·æ•ˆåº”ï¼‰ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯INT8çš„æ¨¡å‹ï¼Œåº”è¯¥æ˜¯æ¨¡å‹çš„ç†è§£åŠ›æ‰€ç”Ÿæˆçš„æç¤ºè¯ä¸è¡Œï¼ˆç”Ÿæˆå›¾åƒæ‰€è¦ç”¨çš„æç¤ºè¯ï¼‰ï¼Œæ•ˆæœå’ŒViusal ChatGPTè¿˜æ˜¯å·®äº†æŒºå¤šçš„ï¼Œä¸è¿‡æ”¹è¿›çš„ç©ºé—´ä¹Ÿå¾ˆå¤§ã€‚è¿™ä¸ªé›†æˆæ¨¡å‹æœ‰è¶£çš„æ˜¯ä»–å†™äº†çˆ¬è™«å»äº†è§£ç½‘ç»œå®æ—¶ä¿¡æ¯ï¼Œæ‰€ä»¥ä»–å¯èƒ½æ‡‚çš„ç½‘ç»œçƒ­æ¢—æ¯”æˆ‘è¿˜å¤šå‘¢ã€‚å¤§å®¶æœ‰å…´è¶£çš„å¯ä»¥å»è‡ªå·±é…ç½®ç©ä¸€ç©ã€‚

### LangChain-ChatGLM
è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªé‡å¤´æˆï¼Œå¯ä»¥æ”¹è¿›çš„ä¸œè¥¿å¾ˆå¤šçš„æ¨¡å‹ã€‚è¿™ä¸ªæ¨¡å‹æ˜¯ç”±æ™ºè°±AIå®˜æ–¹è‡ªå·±å¼€å‘çš„ä¸€ä¸ªçŸ¥è¯†å›¾åº“çš„æ¨¡å‹ï¼Œ[é“¾æ¥åœ¨è¿™](https://github.com/imClumsyPanda/langchain-ChatGLM/tree/master)å®ƒå¯ä»¥æ ¹æ®æœ¬åœ°çš„çŸ¥è¯†åº“å»å›ç­”ä½ çš„é—®é¢˜ï¼Œå†åšä¸€ä¸ªä¸æ°å½“çš„æ¯”å–»ã€‚å¦‚æœè¯´ChatGLMæ˜¯ä¸€ä¸ª550åˆ†çš„å­¦ç”Ÿçš„ç”»ï¼ŒLangChain-ChatGLMå°±æ˜¯ç»™è¿™ä¸ªå­¦ç”Ÿçœ‹äº†ä¸€æœ¬ä¸“ä¸šé¢†åŸŸçš„ä¹¦è®©ä»–è¯»å®Œå†æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚

é¡¹ç›®å®ç°åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿‡ç¨‹åŒ…æ‹¬åŠ è½½æ–‡ä»¶ -> è¯»å–æ–‡æœ¬ -> æ–‡æœ¬åˆ†å‰² -> æ–‡æœ¬å‘é‡åŒ– -> é—®å¥å‘é‡åŒ– -> åœ¨æ–‡æœ¬å‘é‡ä¸­åŒ¹é…å‡ºä¸é—®å¥å‘é‡æœ€ç›¸ä¼¼çš„`top k`ä¸ª -> åŒ¹é…å‡ºçš„æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡å’Œé—®é¢˜ä¸€èµ·æ·»åŠ åˆ°`prompt`ä¸­ -> æäº¤ç»™`LLM`ç”Ÿæˆå›ç­”ã€‚

